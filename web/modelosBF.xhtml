<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
  <h:head>
    <title>Modelos</title>
  </h:head>

  <h:body>
    <b:growl delay="3000" showDetail="true" showSummary="true"/>

    <b:form id="formModelos">
      <p:commandButton value="Cadastrar" style="display: inline-block; margin: 8px 8px 10px"
                       oncomplete="$('.cadastro').modal('show')" ajax="true"/>

      <b:dataTable var="modelo" value="#{modeloCtrl.readAll()}">
        <b:dataTableColumn value="#{modelo.id}" label="ID"/>
        <b:dataTableColumn value="#{modelo.nome}" label="Nome"/>
        <b:dataTableColumn value="#{modelo.fabricante}" label="Fabricante"/>
        <b:dataTableColumn value="#{modelo.tipo}" label="Tipo"/>

        <b:dataTableColumn label="Operações">
          <p:commandButton value="Visualizar" style="display: inline-block; margin-right: 8px"
                           oncomplete="$('.visualizacao').modal('show')" update=":modalVisualizacao"
                           ajax="true">
            <f:setPropertyActionListener value="#{modelo}" target="#{modeloCtrl.selecionado}"/>
          </p:commandButton>

          <p:commandButton  value="Alterar" style="display: inline-block; margin-right: 8px"
                            oncomplete="$('.alteracao').modal('show')" update=":modalAlteracao"
                            ajax="true">
            <f:setPropertyActionListener value="#{modelo}" target="#{modeloCtrl.selecionado}"/>
            <p:confirm message="Deseja realmente alterar este modelo?" icon="pi pi-info-circle"/>
          </p:commandButton>

          <p:commandButton value="Deletar" action="#{modeloCtrl.delete()}" update=":formModelos">
            <f:setPropertyActionListener value="#{modelo}" target="#{modeloCtrl.selecionado}"/>
            <p:confirm message="Deseja realmente deletar este modelo?" icon="pi pi-exclamation-triangle"/>
          </p:commandButton>
        </b:dataTableColumn>
      </b:dataTable>
    </b:form>

    <b:modal id="modalCadastro" class="cadastro" title="Modelo Cadastro">
      <b:form>
        <h:outputText value="Nome"/>
        <b:inputText value="#{modeloCtrl.modelo.nome}"/>

        <h:outputText value="Fabricante"/>
        <b:inputText value="#{modeloCtrl.modelo.fabricante}"/>

        <h:outputText value="Tipo"/>
        <b:inputText value="#{modeloCtrl.modelo.tipo}"/>

        <b:commandButton value="Cadastrar" action="#{modeloCtrl.create()}"/>
        <b:button value="Cancelar" dismiss="modal" style="display: inline-block; margin-left: 10px;"/>
      </b:form>
    </b:modal>

    <b:modal id="modalVisualizacao" class="visualizacao" title="Modelo Visualização">
      <b:form>
        <p:panelGrid columns="2">
          <h:outputText value="ID"/>
          <h:outputText value="#{modeloCtrl.selecionado.id}"/>

          <h:outputText value="Nome"/>
          <h:outputText value="#{modeloCtrl.selecionado.nome}"/>

          <h:outputText value="Fabricante"/>
          <h:outputText value="#{modeloCtrl.selecionado.fabricante}"/>

          <h:outputText value="Tipo"/>
          <h:outputText value="#{modeloCtrl.selecionado.tipo}"/>
        </p:panelGrid>
      </b:form>
    </b:modal>

    <b:modal id="modalAlteracao" class="alteracao" title="Modelo Alteração">
      <b:form>
        <div style="display: flex; margin-bottom: 5px;">
          <h:outputText value="ID"/>
          <h:outputText value="#{pecaCtrl.selecionada.id}" style="margin-left: 10px;"/>
        </div>

        <h:outputText value="Nome"/>
        <b:inputText value="#{modeloCtrl.selecionado.nome}"/>

        <h:outputText value="Fabricante"/>
        <b:inputText value="#{modeloCtrl.selecionado.fabricante}"/>

        <h:outputText value="Tipo"/>
        <b:inputText value="#{modeloCtrl.selecionado.tipo}"/>

        <b:commandButton value="Alterar" action="#{modeloCtrl.update()}"/>
        <b:button value="Cancelar" dismiss="modal" style="display: inline-block; margin-left: 10px;"/>
      </b:form>
    </b:modal>

    <p:confirmDialog global="true">
      <h:form>
        <p:commandButton value="Sim" type="button" styleClass="ui-confirmdialog-yes"/>
        <p:commandButton value="Não" type="button" styleClass="ui-confirmdialog-no ui-button-flat"/>
      </h:form>
    </p:confirmDialog>
  </h:body>
</html>
