<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:p="http://primefaces.org/ui">
  <h:head>
    <title>Desmanx</title>
  </h:head>

  <h:body>
    <c:if test="#{loginCtrl.puxadorLogado ne null and loginCtrl.puxadorLogado.codinome ne 'admin'}">
      <script>location.href = "indexPuxador.xhtml";</script>
    </c:if>

    <c:if test="#{loginCtrl.puxadorLogado ne null and loginCtrl.puxadorLogado.codinome eq 'admin'}">
      <script>location.href = "indexAdministrador.xhtml";</script>
    </c:if>

    <b:growl delay="3000"/>

    <b:jumbotron>
      <h1 style="text-align: center">Desmanx</h1>
    </b:jumbotron>

    <p:dialog draggable="false" resizable="false" visible="true"
              closable="false" closeOnEscape="false" modal="false">
      <b:form id="formLogin">
        <b:panelGrid columns="1">
          <h:outputText value="Codinome"/>
          <b:inputText value="#{codinome}"/>

          <h:outputText value="Senha"/>
          <b:inputSecret value="#{senha}"/>
        </b:panelGrid>

        <b:commandButton value="Logar" style-class="btn btn-primary"
                         action="#{loginCtrl.loga(codinome, senha)}"/>

        <b:link value="Cadastre-se" onclick="$('#modalCadastro').modal('show')"
                style="margin-left: 15px"/>
      </b:form>
    </p:dialog>

    <b:modal id="modalCadastro" title="Puxador Cadastro">
      <b:form id="formCadastro">
        <h:outputText value="CPF"/>
        <b:inputText value="#{puxadorCtrl.puxador.cpf}" required="true"
                     requiredMessage="Campo CPF obrigatório!"/>

        <h:outputText value="Nome"/>
        <b:inputText value="#{puxadorCtrl.puxador.nome}" required="true"
                     requiredMessage="Campo NOME obrigatório!"/>

        <h:outputText value="Codinome"/>
        <b:inputText value="#{puxadorCtrl.puxador.codinome}"
                     requiredMessage="Campo CODINOME obrigatório"/>

        <h:outputText value="Senha"/>
        <b:inputSecret value="#{puxadorCtrl.puxador.senha}"
                       requiredMessage="Campo SENHA obrigatório"/>

        <h:outputText value="Confirme a senha"/>
        <b:inputSecret value="#{confirmacao}"
                       requiredMessage="Campo CONFIRME A SENHA obrigatório"/>

        <h:outputText value="Telefone"/>
        <b:inputText value="#{puxadorCtrl.puxador.telefone}"/>

        <h:outputText value="Endereço"/>
        <b:inputText value="#{puxadorCtrl.puxador.endereco}"/>

        <h:outputText value="Endereço da Mãe"/>
        <b:inputText value="#{puxadorCtrl.puxador.enderecoMae}"/>

        <h:outputText value="Quantidade de Prisões"/>
        <b:inputText value="#{puxadorCtrl.puxador.quantidadePrisoes}"/>

        <h:outputText value="Especialidade de Roubo"/>
        <b:inputText value="#{puxadorCtrl.puxador.especialidadeRoubo}"/>

        <h:outputText value="Anos de Experiência"/>
        <b:inputText value="#{puxadorCtrl.puxador.anosExperiencia}"/>

        <b:commandButton value="Cadastrar" look="success" action="#{puxadorCtrl.create(confirmacao)}"/>
        <b:button value="Cancelar" dismiss="modal" look="danger"
                  style="display: inline-block; margin-left: 10px;"/>
      </b:form>
    </b:modal>
  </h:body>
</html>
